{
	"name": "dataflow1",
	"properties": {
		"type": "MappingDataFlow",
		"typeProperties": {
			"sources": [
				{
					"dataset": {
						"referenceName": "lgndatalakejson",
						"type": "DatasetReference"
					},
					"name": "source1"
				}
			],
			"sinks": [
				{
					"dataset": {
						"referenceName": "AzureSqlDatabaseDataset_New2",
						"type": "DatasetReference"
					},
					"name": "sink1"
				}
			],
			"transformations": [
				{
					"name": "Flatten1"
				},
				{
					"name": "Flatten2"
				}
			],
			"script": "source(output(\n\t\t{@odata.context} as string,\n\t\tvalue as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, DateCreated as string, DateModified as string, Deleted as boolean, DateaTimeOccur as string, Description as string, ExactLocIncid as string, IncidentNo as string, TimofOccurrence as string, AdditionSummary as string, Clients as string, ClosingRemarks as string, CompanyNameR as string, CompanyPhone as string, CostofIncident as string, County as string, DateClosed as string, DateReptoEmp as string, DateReviewed as string, DateSentInvest as string, DatInvestigated as string, detailsinvesbel as string, EHSCoorComm as string, EHSCoorComments as string, EmpFeedback as string, ExternalID as string, FieldforMyTasks as string, FirstSentFinApp as string, HelperYesNo as boolean, Ifcontractor as string, Immactorrecres as string, ImmCorrActTaken as string, ImportRecNo as string, IncidentHelper as string, IncidentValid as string, InjPartWho as string, InjurePartyText as string, InvestCompleted as string, InvestigResults as string, InvestReq as string, InvestTeam as string, InvolinIncident as string, LastSentFinApp as string, MIPastDraftStg as boolean, NearMiss as boolean, ProcSafetyInci as string, ProjectListing as string, ProjectTask as string, Range as string, RCAAppComm as string, RCAApprovDate as string, ReporToWithText as string, RootCause as string, Section as string, SecurityNotifie as string, SuspectedCause as string, TargClosingDate as string, TargetDate as string, TIIInvRequired as string, TimofOccNew as string, Township as string, Witnessesadetai as string, WitnessFName as string, WitnessLName as string, WitnessPhone as string, wullowseverity as string, CreatedBy as string, EmployeeName as string, Location as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, DateCreated as string, DateModified as string, Deleted as boolean, Address1 as string, Address2 as string, Area as string, City as string, County as string, Description as string, District as string, Fax as string, License as string, LocationCode as string, Name as string, Path as string, Phone as string, PostalCode as string, State as string, UserLicenseCode as string), ModifiedBy as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, DateCreated as string, DateModified as string, Deleted as boolean, IsSystem as boolean, Name as string, City as string, Company as string, ContractExpiry as string, ContractorName as string, ContractorNotes as string, DateHired as string, DateOfBirth as string, Email as string, EmergencyContact as string, EmergencyPhone as string, FirstName as string, FullName as string, Gender as string, HomeAddress as string, HourlyWage as string, InsuranceExpiry as string, IsContracted as boolean, IsSupervisor as boolean, IsSystemEmployee as boolean, JobCode as string, LastName as string, MiddleName as string, Notes as string, Number as string, Phone as string, Position as string, Prefix as string, Responsibility as string, SocialSecurity as string, State as string, Suffix as string, WorkStatus as string, ZipCode as string), Supervisor as string, Workflow as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, DateCreated as string, DateModified as string, Deleted as boolean, DateNotRequired as string, DueDate as string, DueDateType as string, EntityId as string, EntityName as string, IsVirtual as boolean, LocationId as string, ObjectId as string, WorkflowStatus as string), AccidentCountry as string, ActualSeverity as string, BehavioQuestion as string, BehaviorSection as string, Brand as string, Business as string, Category as string, ClosedBy as string, currentuserhelp as string, DepartmeManager as string, Department as string, Discoverer as string, EClassification as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, Deleted as boolean, DateCreated as string, DateModified as string, Value as string, Index as string, Caption as string), EHSCoordinator as string, EmployeeType as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, Deleted as boolean, DateCreated as string, DateModified as string, Value as string, Index as string, Caption as string), Environment as string, FinalApprover as string, IncidenOccurred as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, Deleted as boolean, DateCreated as string, DateModified as string, Value as string, Index as string, Caption as string), InjPartOther as string, InjPartSubcon as string, InvestiAssigned as string, InvestigatedBy as string, OfficeLocation as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, DateCreated as string, DateModified as string, Deleted as boolean, Address1 as string, Address2 as string, Area as string, City as string, County as string, Description as string, District as string, Fax as string, License as string, LocationCode as string, Name as string, Path as string, Phone as string, PostalCode as string, State as string, UserLicenseCode as string), OfficePractice as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, DateCreated as string, DateModified as string, Deleted as boolean, PracticeID as string, PracticeName as string, RecordNo as string), People as string, PotentaSeverity as string, PRInvestigation as string, ProjDirectoryv4 as string, ProjectNumber as string, ProjectNumberv4 as string, Property as string, Quality as string, RCAApproverNAme as string, ReforAssignment as string, ReportedBy as string, ReportedTo as string, ReportType as string, ReviewedBy as string, SafeAcciLocType as string, Shift as string, State as string, TimeZone as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, Deleted as boolean, DateCreated as string, DateModified as string, Value as string, Index as string, Caption as string), CorrectiActions as string[], IncidentTypes as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, Deleted as boolean, DateCreated as string, DateModified as string, Value as string, Index as string, Caption as string)[], IndividInvolved as string[], RoCauseAnalysis as string[], RootCauseList as string[], SubIncidents as ({@odata.type} as string, {@odata.id} as string, {@odata.editLink} as string, Id as string, DateCreated as string, DateModified as string, Deleted as boolean, HelperPastD as boolean, IncidenRecordNo as string, InjurePartyName as string, InjuryType as string)[], {ILX.Attachments@odata.context} as string, {ILX.Attachments} as string[])[]\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tignoreNoFilesFound: false,\n\tdocumentForm: 'singleDocument',\n\tbackslashEscape: true) ~> source1\nsource1 foldDown(unroll(value),\n\tmapColumn(\n\t\tcontext = {@odata.context},\n\t\t{@odata.type} = value.{@odata.type},\n\t\t{@odata.id} = value.{@odata.id},\n\t\t{@odata.editLink} = value.{@odata.editLink},\n\t\tId = value.Id,\n\t\tDateCreated = value.DateCreated,\n\t\tDateModified = value.DateModified,\n\t\tDeleted = value.Deleted,\n\t\tDateaTimeOccur = value.DateaTimeOccur,\n\t\tDescription = value.Description,\n\t\tExactLocIncid = value.ExactLocIncid,\n\t\tIncidentNo = value.IncidentNo,\n\t\tTimofOccurrence = value.TimofOccurrence,\n\t\tAdditionSummary = value.AdditionSummary,\n\t\tClients = value.Clients,\n\t\tClosingRemarks = value.ClosingRemarks,\n\t\tCompanyNameR = value.CompanyNameR,\n\t\tCompanyPhone = value.CompanyPhone,\n\t\tCostofIncident = value.CostofIncident,\n\t\tCounty = value.County,\n\t\tDateClosed = value.DateClosed,\n\t\tDateReptoEmp = value.DateReptoEmp,\n\t\tDateReviewed = value.DateReviewed,\n\t\tDateSentInvest = value.DateSentInvest,\n\t\tDatInvestigated = value.DatInvestigated,\n\t\tdetailsinvesbel = value.detailsinvesbel,\n\t\tEHSCoorComm = value.EHSCoorComm,\n\t\tEHSCoorComments = value.EHSCoorComments,\n\t\tEmpFeedback = value.EmpFeedback,\n\t\tExternalID = value.ExternalID,\n\t\tFieldforMyTasks = value.FieldforMyTasks,\n\t\tFirstSentFinApp = value.FirstSentFinApp,\n\t\tHelperYesNo = value.HelperYesNo,\n\t\tIfcontractor = value.Ifcontractor,\n\t\tImmactorrecres = value.Immactorrecres,\n\t\tImmCorrActTaken = value.ImmCorrActTaken,\n\t\tImportRecNo = value.ImportRecNo,\n\t\tIncidentHelper = value.IncidentHelper,\n\t\tIncidentValid = value.IncidentValid,\n\t\tInjPartWho = value.InjPartWho,\n\t\tInjurePartyText = value.InjurePartyText,\n\t\tInvestCompleted = value.InvestCompleted,\n\t\tInvestigResults = value.InvestigResults,\n\t\tInvestReq = value.InvestReq,\n\t\tInvestTeam = value.InvestTeam,\n\t\tInvolinIncident = value.InvolinIncident,\n\t\tLastSentFinApp = value.LastSentFinApp,\n\t\tMIPastDraftStg = value.MIPastDraftStg,\n\t\tNearMiss = value.NearMiss,\n\t\tProcSafetyInci = value.ProcSafetyInci,\n\t\tProjectListing = value.ProjectListing,\n\t\tProjectTask = value.ProjectTask,\n\t\tRange = value.Range,\n\t\tRCAAppComm = value.RCAAppComm,\n\t\tRCAApprovDate = value.RCAApprovDate,\n\t\tReporToWithText = value.ReporToWithText,\n\t\tRootCause = value.RootCause,\n\t\tSection = value.Section,\n\t\tSecurityNotifie = value.SecurityNotifie,\n\t\tSuspectedCause = value.SuspectedCause,\n\t\tTargClosingDate = value.TargClosingDate,\n\t\tTargetDate = value.TargetDate,\n\t\tTIIInvRequired = value.TIIInvRequired,\n\t\tTimofOccNew = value.TimofOccNew,\n\t\tTownship = value.Township,\n\t\tWitnessesadetai = value.Witnessesadetai,\n\t\tWitnessFName = value.WitnessFName,\n\t\tWitnessLName = value.WitnessLName,\n\t\tWitnessPhone = value.WitnessPhone,\n\t\twullowseverity = value.wullowseverity,\n\t\tCreatedBy = value.CreatedBy,\n\t\tEmployeeName = value.EmployeeName,\n\t\tLocation = value.Location,\n\t\tModifiedBy = value.ModifiedBy,\n\t\tSupervisor = value.Supervisor,\n\t\tWorkflow = value.Workflow,\n\t\tAccidentCountry = value.AccidentCountry,\n\t\tActualSeverity = value.ActualSeverity,\n\t\tBehavioQuestion = value.BehavioQuestion,\n\t\tBehaviorSection = value.BehaviorSection,\n\t\tBrand = value.Brand,\n\t\tBusiness = value.Business,\n\t\tCategory = value.Category,\n\t\tClosedBy = value.ClosedBy,\n\t\tcurrentuserhelp = value.currentuserhelp,\n\t\tDepartmeManager = value.DepartmeManager,\n\t\tDepartment = value.Department,\n\t\tDiscoverer = value.Discoverer,\n\t\tEClassification = value.EClassification,\n\t\tEHSCoordinator = value.EHSCoordinator,\n\t\tEmployeeType = value.EmployeeType,\n\t\tEnvironment = value.Environment,\n\t\tFinalApprover = value.FinalApprover,\n\t\tIncidenOccurred = value.IncidenOccurred,\n\t\tInjPartOther = value.InjPartOther,\n\t\tInjPartSubcon = value.InjPartSubcon,\n\t\tInvestiAssigned = value.InvestiAssigned,\n\t\tInvestigatedBy = value.InvestigatedBy,\n\t\tOfficeLocation = value.OfficeLocation,\n\t\tOfficePractice = value.OfficePractice,\n\t\tPeople = value.People,\n\t\tPotentaSeverity = value.PotentaSeverity,\n\t\tPRInvestigation = value.PRInvestigation,\n\t\tProjDirectoryv4 = value.ProjDirectoryv4,\n\t\tProjectNumber = value.ProjectNumber,\n\t\tProjectNumberv4 = value.ProjectNumberv4,\n\t\tProperty = value.Property,\n\t\tQuality = value.Quality,\n\t\tRCAApproverNAme = value.RCAApproverNAme,\n\t\tReforAssignment = value.ReforAssignment,\n\t\tReportedBy = value.ReportedBy,\n\t\tReportedTo = value.ReportedTo,\n\t\tReportType = value.ReportType,\n\t\tReviewedBy = value.ReviewedBy,\n\t\tSafeAcciLocType = value.SafeAcciLocType,\n\t\tShift = value.Shift,\n\t\tState = value.State,\n\t\tTimeZone = value.TimeZone,\n\t\tCorrectiActions = value.CorrectiActions,\n\t\tIncidentTypes = value.IncidentTypes,\n\t\tIndividInvolved = value.IndividInvolved,\n\t\tRoCauseAnalysis = value.RoCauseAnalysis,\n\t\tRootCauseList = value.RootCauseList,\n\t\tSubIncidents = value.SubIncidents,\n\t\t{ILX.Attachments@odata.context} = value.{ILX.Attachments@odata.context},\n\t\t{ILX.Attachments} = value.{ILX.Attachments}\n\t),\n\tskipDuplicateMapInputs: false,\n\tskipDuplicateMapOutputs: false) ~> Flatten1\nFlatten1 foldDown(unroll(SubIncidents),\n\tmapColumn(\n\t\teach(match(/* All input columns */ true()),\n\t\t\t/* Input name */ $$ = $$)\n\t),\n\tskipDuplicateMapInputs: false,\n\tskipDuplicateMapOutputs: false) ~> Flatten2\nFlatten2 sink(input(\n\t\tDATE as date,\n\t\tSTLPCPI_20171116 as integer,\n\t\tSTLPCPI_20181115 as integer\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tdeletable:false,\n\tinsertable:true,\n\tupdateable:false,\n\tupsertable:false,\n\tformat: 'table',\n\tskipDuplicateMapInputs: true,\n\tskipDuplicateMapOutputs: true,\n\terrorHandlingOption: 'stopOnFirstError') ~> sink1"
		}
	}
}